(function(){"use strict";function t(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function n(t){var n=!1,e="Webkit Moz ms O".split(" "),o=document.createElement("div"),i=null;if(t=t.toLowerCase(),void 0!==o.style[t]&&(n=!0),n===!1){i=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<e.length;r++)if(void 0!==o.style[e[r]+i]){n=!0;break}}return n}function e(t){return Array.prototype.slice.call(t,0)}function o(t){return parseInt(t,10)}function i(t,n,e,o){var i,r;n||(n={}),t.indexOf(".")!==-1&&(r=t.split("."),t=r[0],r.shift(),n.class=r.join(" ")),t.indexOf("#")!==-1&&(r=t.split("#"),t=r[0],n.id=r[1]),i=document.createElement(t);for(var l in n)i.setAttribute(l,n[l]);return e&&e.appendChild(i),o&&(i.innerHTML=o),i}function r(t,n){return!!(t&&n&&t.parentNode)&&(t===n||t.parentNode===n||r(t.parentNode,n))}function l(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):window.event&&window.event.hasOwnProperty("cancelBubble")&&(window.event.cancelBubble=!0)}function s(t,n){if(!A)return void d(t,"click",n);var e=!1;d(t,"touchstart",function(t){e=!0}),d(t,"touchend",function(t){e&&(n(),l(t))}),d(t,"touchcancel touchleave touchmove",function(t){e=!1})}function a(t,n){f(t,"touchstart touchend touchcancel click",n)}function u(t,n){!t||0===t.length&&t!=window||(t.length?Array.prototype.forEach.call(t,function(t,e){n(t)}):n(t))}function c(t,n,e,o){d(t,n,function(o){e(o),f(t,n,e)},o)}function d(t,n,e,o){u(t,function(t){var i=n.split(" ");for(var r in i)t.addEventListener(i[r],e,o)})}function f(t,n,e){u(t,function(t){var o=n.split(" ");for(var i in o)t.removeEventListener(o[i],e)})}function v(t,n){u(t,function(t){if(t.classList){var e=n.split(" ");for(var o in e)t.classList.add(e[o])}else t.className+=" "+n})}function y(t,n){u(t,function(t){if(t.classList){var e=n.split(" ");for(var o in e)t.classList.remove(e[o])}else t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")})}function h(t,n,e,o){e&&c(t,E,e),c(t,E,function(e){y(t,n),o&&o(e)}),v(t,n)}function p(t,n,e){u(t,function(t){t.setAttribute(n,e)})}function b(t){return t===Object(t)}function m(t){return"string"==typeof t}function g(){if(C>0)return C;var n=i("div.huer-scrollbar-measure",null,document.body);return C=n.offsetWidth-n.clientWidth,t(n),C}var C,w="webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd animationend",E="webkitAnimationStart mozAnimationStart msAnimationStart oAnimationStart animationstart",A="ontouchstart"in document.documentElement,k="huer-",O=k+"fade-in",S=k+"fade-out",x=k+"bounce-in",q=k+"zoom-out",N=k+"blur",L=k+"focus",T=k+"stop-scrolling",P=k+"container",V=k+"overlay",B=k+"body",F=k+"content-wrapper",D="tabindex",z={html:"Empty",showOnInit:!0,useEffects:!0,preventScroll:!1,destroyOnClick:!1,destroyOnEsc:!1,onFeatureFail:null,onDismiss:null,overlayClass:null,bodyClass:null,blurContent:!1,blurAllSiblings:!1,blurSelector:'[data-huer-effect="blur"]',wrapContent:!0},K=function(){var t,e=this;b(arguments[0])?t=arguments[0]:arguments[0]&&(t={html:arguments[0]}),e.element=document.body,e.opt={},e.vars={},void 0===t&&(t={});for(var o in z)e.opt[o]=void 0!==t[o]?t[o]:z[o];var r={animation:n("animation"),transition:n("transition"),transform:n("transform"),filter:n("filter"),query:void 0!==document.querySelectorAll};if(r.filter||(e.opt.blurContent=!1),r.animation&&r.transition&&r.transform||(e.opt.useEffects=!1),!r.query)return void(e.opt.onFeatureFail?e.opt.onFeatureFail(r):alert("Your browser is lacking certain features. Please update to a modern browser."));var l,s=i("div."+P),a=i("div."+V,null,s),u=i("div."+B,null,s);e.opt.overlayClass&&v(a,e.opt.overlayClass),e.opt.bodyClass&&v(u,e.opt.bodyClass),e.opt.wrapContent?m(e.opt.html)?i("div."+F,null,u,e.opt.html):(l=i("div."+F,null,u),l.appendChild(e.opt.html)):m(e.opt.html)?u.innerHTML=e.opt.html:(l=i("div."+F,null,u),u.appendChild(e.opt.html)),e.container=s,e.overlay=a,e.body=u,e.element.appendChild(e.container),e.opt.showOnInit&&e.show(),e.click('[data-destroy="click"]',function(){e.isBusy()||e.destroy(e.opt.onDismiss)})},R=K.prototype;R.show=function(t){var n=this;n.isVisible||(n.container.style.visibility="visible",n.toggleEffects(t),d(window,"keydown",n.vars.onKeydownEvent=n.onKeydown.bind(n)),n.focusElement(!0))},R.hide=function(t){f(window,"keydown",this.vars.onKeydownEvent),this.toggleEffects(t)},R.destroy=function(n){var e=this;e.hide(function(){n?n():e.opt.onDismiss&&e.opt.onDismiss(),t(e.container),e=null})},R.toggleScroll=function(t){this.opt.preventScroll&&(t?(y(document.body,T),document.body.style.paddingRight=this.vars.bodyPadding):(this.vars.bodyPadding=document.body.style.paddingRight,document.body.style.paddingRight=o(this.vars.bodyPadding)+o(g())+"px",v(document.body,T)))},R.blurContent=function(){var t=this;if(t.opt.blurContent)for(var n=t.opt.blurAllSiblings?t.container.parentNode.childNodes:document.querySelectorAll(t.opt.blurSelector),e=0;e<n.length;e++)n[e]!=t.container&&v(n[e],N)},R.focusContent=function(){var t=this;if(t.opt.blurContent){var n=document.querySelectorAll("."+N);y(n,N),h(n,L)}},R.toggleEffects=function(t){var n=this;return n.opt.useEffects?void(n.isVisible?(c(n.body,w,function(){y(n.overlay,S),y(n.body,q),n.container.style.visibility="hidden",n.toggleScroll(!0),n.isVisible=!1,t&&t()}),v(n.overlay,S),v(n.body,q),n.toggleOverlayClick(),n.focusContent()):(c(n.body,w,function(){y(n.overlay,O),y(n.body,x),n.isVisible=!0,n.toggleOverlayClick(),t&&t()}),n.toggleScroll(!1),v(n.overlay,O),v(n.body,x),n.blurContent())):(n.toggleScroll(n.isVisible),n.isVisible=!0,void(t&&t()))},R.onOverlayClick=function(){this.isVisible&&this.opt.destroyOnClick&&!this.isBusy()&&this.destroy()},R.toggleOverlayClick=function(){var t=this;setTimeout(function(){t.vars.onOverlayClickEvent?(a(t.overlay,t.vars.onOverlayClickEvent),t.vars.onOverlayClickEvent=null):s(t.overlay,t.vars.onOverlayClickEvent=t.onOverlayClick.bind(t))},0)},R.onKeydown=function(t){var n=t.keyCode||t.which,e=t.target||t.srcElement;if([9,13,32,27].indexOf(n)===-1){if(!r(e,this.body))return}else 27===n&&this.opt.destroyOnEsc&&!this.isBusy()?this.destroy():9===n&&(l(t),this.focusElement());return!0},R.focusElement=function(t){t&&(this.lastTabindex=null);var n=this.query("["+D+"]");if(!n.length)return void this.overlay.focus();if(n=e(n),n.sort(function(t,n){return t.getAttribute&&n.getAttribute?o(t.getAttribute(D))-o(n.getAttribute(D)):-1}),this.lastTabindex)for(var i=0;i<n.length;i++)if(n[i].getAttribute(D)==this.lastTabindex&&i<n.length-1)return n[i+1].focus(),void(this.lastTabindex=n[i+1].getAttribute(D));n[0].focus(),this.lastTabindex=n[0].getAttribute(D)},R.getHtml=function(){return this.container},R.query=function(t){return e(this.container.querySelectorAll(t))},R.click=function(t,n){m(t)&&(t=this.query(t)),s(t,n)},R.attr=function(t,n,o){m(t)&&(t=this.query(t)),p(e(t),n,o)},R.isBusy=function(t){return void 0===t||t!==!0&&t!==!1||(this.busy=t),this.busy||!1};var j=null;this.huer=function(t){return j&&(j.opt.blurContent=!1,j.destroy()),j=new K(t)},this.huer.globals=z}).call(this);