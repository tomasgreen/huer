(function(){"use strict";function t(t){return t&&t.parentNode?void t.parentNode.removeChild(t):void 0}function e(t){var e=!1,n="Webkit Moz ms O".split(" "),o=document.createElement("div"),i=null;if(t=t.toLowerCase(),void 0!==o.style[t]&&(e=!0),e===!1){i=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<n.length;r++)if(void 0!==o.style[n[r]+i]){e=!0;break}}return e}function n(t){return Array.prototype.slice.call(t,0)}function o(t,e,n,o){var i;if(-1!==t.indexOf(".")){var r=t.split(".");t=r[0],i=document.createElement(r[0]),r.shift(),i.setAttribute("class",r.join(" "))}else i=document.createElement(t);for(var a in e)i.setAttribute(a,e[a]);return n&&n.appendChild(i),o&&(i.innerHTML=o),i}function i(t,e,n,o){if(t&&(0!==t.length||t==window))if(void 0===o&&(o=!1),t.length)for(var r=0;r<t.length;r++)i(t[r],e,n,o);else{var a=e.split(" ");for(var l in a)t.addEventListener(a[l],n,o)}}function r(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):window.event&&window.event.hasOwnProperty("cancelBubble")&&(window.event.cancelBubble=!0)}function a(t,e){if(!p)return void i(t,"click",e);var n=!1;i(t,"touchstart",function(){n=!0}),i(t,"touchend",function(t){n&&(e(),r(t))}),i(t,"touchcancel touchleave touchmove",function(){n=!1})}function l(t,e,n){if(t&&(0!==t.length||t==window))if(t.length)for(var o=0;o<t.length;o++)l(t[o],e,n);else{var i=e.split(" ");for(var r in i)t.removeEventListener(i[r],n)}}function u(t,e){if(t.classList){var n=e.split(" ");for(var o in n)t.classList.add(n[o])}else t.className+=" "+e}function s(t,e){if(t.classList){var n=e.split(" ");for(var o in n)t.classList.remove(n[o])}else t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function c(t){return t===Object(t)}function f(t){t.style.marginTop=t.offsetHeight/2*-1+"px",t.style.marginLeft=t.offsetWidth/2*-1+"px"}var d="webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd animationend",b="webkitAnimationStart mozAnimationStart msAnimationStart oAnimationStart animationstart",p="ontouchstart"in document.documentElement,v={html:"Your view is empty.",showOnInit:!0,useEffects:!0,clickOutsideToDismiss:!1,overlayBackgroundColor:null,featureFailCallback:null,blurContent:!0,blurAllSiblings:!1,blurSelector:'[data-huer-effect="blur"]',wrapContent:!0,centerize:!0},y=function(){var t,n=this;c(arguments[0])?t=arguments[0]:arguments[0]&&(t={html:arguments[0]}),n.element=document.body,n.opt={},void 0===t&&(t={});for(var i in v)n.opt[i]=void 0!==t[i]?t[i]:v[i];var r={animation:e("animation"),transition:e("transition"),transform:e("transform"),filter:e("filter"),query:void 0!==document.querySelectorAll};if(r.filter||(n.opt.blurContent=!1),r.animation&&r.transition&&r.transform||(n.opt.useEffects=!1),!r.query)return void(n.opt.featureFailCallback?n.opt.featureFailCallback(r):alert("Your browser is lacking certain features. Please update to a modern browser."));var a=o("div.huer-container"),l=o("div.huer-overlay",null,a),u=o("div.huer-body",null,a);n.opt.overlayBackgroundColor&&(l.style.backgroundColor=n.opt.overlayBackgroundColor),n.opt.wrapContent?o("div.huer-content-wrapper",null,u,n.opt.html):u.innerHTML=n.opt.html,n.container=a,n.overlay=l,n.body=u,n.element.appendChild(n.container),n.click('[data-destroy="click"]',function(){n.destroy()}),n.click(n.overlay,n.onOverlayClick),n.opt.showOnInit&&n.show()};y.prototype.blurContent=function(){var t=this;if(t.opt.blurContent)for(var e=t.opt.blurAllSiblings?t.container.parentNode.childNodes:document.querySelectorAll(t.opt.blurSelector),n=0;n<e.length;n++)e[n]!=t.container&&u(e[n],"huer-blur")},y.prototype.focusContent=function(){function t(){for(var e=0;e<n.length;e++)s(n[e],"huer-focus"),l(n[e],d,t)}var e=this;if(e.opt.blurContent)for(var n=document.querySelectorAll(".huer-blur"),o=0;o<n.length;o++)s(n[o],"huer-blur"),u(n[o],"huer-focus"),i(n[o],d,t)},y.prototype.toggleEffects=function(t){var e=this;if(!e.opt.useEffects)return void(t&&t());if(e.isVisible){u(e.overlay,"huer-fade-out"),u(e.body,"huer-zoom-out"),e.focusContent();var n=function(){s(e.overlay,"huer-fade-out"),s(e.body,"huer-zoom-out"),e.container.style.display="none",t&&t(),l(e.body,d,n)};i(e.body,d,n)}else{u(e.overlay,"huer-fade-in"),u(e.body,"huer-bounce-in"),e.blurContent();var o=function(){l(e.body,b,o)},r=function(){s(e.overlay,"huer-fade-in"),s(e.body,"huer-bounce-in"),t&&t(),l(e.body,d,r)};i(e.body,b,o),i(e.body,d,r)}},y.prototype.show=function(t){var e=this;e.isVisible||(e.container.style.visibility="hidden",e.container.style.display="block",e.opt.centerize&&f(e.body),e.container.style.visibility="visible",e.toggleEffects(t),this.onOverlayClick=function(){e.opt.clickOutsideToDismiss&&!e.isBusy()&&e.destroy()},this.onWindowKeydown=function(t){var n=t.keyCode||t.which;-1!==[9,13,32,27].indexOf(n)&&9===n&&(r(t),e.focusElement())},this.focusElement=function(t){t&&(e.lastTabindex=null);var o=e.query("[tabindex]");if(!o.length)return void e.overlay.focus();if(o=n(o),o.sort(function(t,e){return t.getAttribute&&e.getAttribute?parseInt(t.getAttribute("tabindex"))-parseInt(e.getAttribute("tabindex")):-1}),e.lastTabindex)for(var i=0;i<o.length;i++)if(o[i].getAttribute("tabindex")==e.lastTabindex&&i<o.length-1)return o[i+1].focus(),void(e.lastTabindex=o[i+1].getAttribute("tabindex"));o[0].focus(),e.lastTabindex=o[0].getAttribute("tabindex")},i(window,"keydown",e.onWindowKeydown),e.focusElement(!0),e.isVisible=!0)},y.prototype.hide=function(t){var e=this;e.isVisible&&(l(window,"resize",e.onWindowResize),l(window,"keydown",e.onWindowKeydown),e.toggleEffects(t),e.isVisible=!1)},y.prototype.getHtml=function(){return this.container},y.prototype.query=function(t){return n(this.container.querySelectorAll(t))},y.prototype.click=function(t,e){"string"==typeof t&&(t=this.query(t)),a(t,e)},y.prototype.attr=function(t,e,o){"string"==typeof t&&(t=this.query(t)),t=n(t);for(var i in t)t[i].setAttribute(e,o)},y.prototype.isBusy=function(t){return void 0===t||t!==!0&&t!==!1||(this.busy=t),this.busy||!1},y.prototype.destroy=function(){var e=this;e.hide(function(){t(e.container),e=null})};var h=null;this.huer=function(t){return h&&(h.opt.blurContent=!1,h.destroy()),h=new y(t)},this.huer.globals=v}).call(this);