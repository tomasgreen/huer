(function(){"use strict";function t(t){return t&&t.parentNode?void t.parentNode.removeChild(t):void 0}function n(t){var n=!1,e="Webkit Moz ms O".split(" "),i=document.createElement("div"),o=null;if(t=t.toLowerCase(),void 0!==i.style[t]&&(n=!0),n===!1){o=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<e.length;r++)if(void 0!==i.style[e[r]+o]){n=!0;break}}return n}function e(t){return Array.prototype.slice.call(t,0)}function i(t){return parseInt(t,10)}function o(t,n,e,i){var o,r;n||(n={}),-1!==t.indexOf(".")&&(r=t.split("."),t=r[0],r.shift(),n.class=r.join(" ")),-1!==t.indexOf("#")&&(r=t.split("#"),t=r[0],n.id=r[1]),o=document.createElement(t);for(var l in n)o.setAttribute(l,n[l]);return e&&e.appendChild(o),i&&(o.innerHTML=i),o}function r(t,n){return t&&n&&t.parentNode?t===n||t.parentNode===n?!0:r(t.parentNode,n):!1}function l(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):window.event&&window.event.hasOwnProperty("cancelBubble")&&(window.event.cancelBubble=!0)}function s(t,n){if(!k)return void d(t,"click",n);var e=!1;d(t,"touchstart",function(){e=!0}),d(t,"touchend",function(t){e&&(n(),l(t))}),d(t,"touchcancel touchleave touchmove",function(){e=!1})}function a(t,n){f(t,"touchstart touchend touchcancel click",n)}function u(t,n){!t||0===t.length&&t!=window||(t.length?Array.prototype.forEach.call(t,function(t){n(t)}):n(t))}function c(t,n,e,i){d(t,n,function(i){e(i),f(t,n,e)},i)}function d(t,n,e,i){u(t,function(t){var o=n.split(" ");for(var r in o)t.addEventListener(o[r],e,i)})}function f(t,n,e){u(t,function(t){var i=n.split(" ");for(var o in i)t.removeEventListener(i[o],e)})}function v(t,n){u(t,function(t){if(t.classList){var e=n.split(" ");for(var i in e)t.classList.add(e[i])}else t.className+=" "+n})}function h(t,n){u(t,function(t){if(t.classList){var e=n.split(" ");for(var i in e)t.classList.remove(e[i])}else t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")})}function y(t,n,e,i){e&&c(t,A,e),c(t,A,function(e){h(t,n),i&&i(e)}),v(t,n)}function p(t,n,e){u(t,function(t){t.setAttribute(n,e)})}function b(t){return t===Object(t)}function m(t){return"string"==typeof t}function g(t){t.style.marginTop=t.offsetHeight/2*-1+"px",t.style.marginLeft=t.offsetWidth/2*-1+"px"}function w(){if(C>0)return C;var n=o("div.huer-scrollbar-measure",null,document.body);return C=n.offsetWidth-n.clientWidth,t(n),C}var C,E="webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd animationend",A="webkitAnimationStart mozAnimationStart msAnimationStart oAnimationStart animationstart",k="ontouchstart"in document.documentElement,O="huer-",S=O+"fade-in",x=O+"fade-out",q=O+"bounce-in",L=O+"zoom-out",N=O+"blur",T=O+"focus",P=O+"stop-scrolling",V=O+"container",z=O+"overlay",B=O+"body",F=O+"content-wrapper",D="tabindex",H={html:"Empty",showOnInit:!0,useEffects:!0,preventScroll:!1,destroyOnClick:!1,destroyOnEsc:!1,onFeatureFail:null,onDismiss:null,overlayClass:null,blurContent:!1,blurAllSiblings:!1,blurSelector:'[data-huer-effect="blur"]',wrapContent:!0,centerize:!1},K=function(){var t,e=this;b(arguments[0])?t=arguments[0]:arguments[0]&&(t={html:arguments[0]}),e.element=document.body,e.opt={},e.vars={},void 0===t&&(t={});for(var i in H)e.opt[i]=void 0!==t[i]?t[i]:H[i];var r={animation:n("animation"),transition:n("transition"),transform:n("transform"),filter:n("filter"),query:void 0!==document.querySelectorAll};if(r.filter||(e.opt.blurContent=!1),r.animation&&r.transition&&r.transform||(e.opt.useEffects=!1),!r.query)return void(e.opt.onFeatureFail?e.opt.onFeatureFail(r):alert("Your browser is lacking certain features. Please update to a modern browser."));var l=o("div."+V),s=o("div."+z,null,l),a=o("div."+B,null,l);if(e.opt.overlayClass&&v(s,e.opt.overlayClass),e.opt.wrapContent)if(m(e.opt.html))o("div."+F,null,a,e.opt.html);else{var u=o("div."+F,null,a);u.appendChild(e.opt.html)}else if(m(e.opt.html))a.innerHTML=e.opt.html;else{var u=o("div."+F,null,a);a.appendChild(e.opt.html)}e.container=l,e.overlay=s,e.body=a,e.element.appendChild(e.container),e.opt.showOnInit&&e.show(),e.click('[data-destroy="click"]',function(){e.isBusy()||e.destroy(e.opt.onDismiss)})},R=K.prototype;R.show=function(t){var n=this;n.isVisible||(n.container.style.visibility="hidden",v(n.container,"huer-container-visible"),n.opt.centerize&&g(n.body),n.container.style.visibility="visible",n.toggleEffects(t),d(window,"keydown",n.vars.onKeydownEvent=n.onKeydown.bind(n)),n.focusElement(!0))},R.hide=function(t){f(window,"keydown",this.vars.onKeydownEvent),this.toggleEffects(t)},R.destroy=function(n){var e=this;e.hide(function(){n?n():e.opt.onDismiss&&e.opt.onDismiss(),t(e.container),e=null})},R.toggleScroll=function(t){this.opt.preventScroll&&(t?(h(document.body,P),document.body.style.paddingRight=this.vars.bodyPadding):(this.vars.bodyPadding=document.body.style.paddingRight,document.body.style.paddingRight=i(this.vars.bodyPadding)+i(w())+"px",v(document.body,P)))},R.blurContent=function(){var t=this;if(t.opt.blurContent)for(var n=t.opt.blurAllSiblings?t.container.parentNode.childNodes:document.querySelectorAll(t.opt.blurSelector),e=0;e<n.length;e++)n[e]!=t.container&&v(n[e],N)},R.focusContent=function(){var t=this;if(t.opt.blurContent){var n=document.querySelectorAll("."+N);h(n,N),y(n,T)}},R.toggleEffects=function(t){function n(){h(i.overlay,x),h(i.body,L),h(i.container,"huer-container-visible"),i.toggleScroll(!0),i.isVisible=!1,t&&t()}function e(){h(i.overlay,S),h(i.body,q),i.isVisible=!0,i.toggleOverlayClick(),t&&t()}var i=this;return i.opt.useEffects?void(i.isVisible?(c(i.body,E,n),v(i.overlay,x),v(i.body,L),i.toggleOverlayClick(),i.focusContent()):(c(i.body,E,e),i.toggleScroll(!1),v(i.overlay,S),v(i.body,q),i.blurContent())):(i.toggleScroll(i.isVisible),i.isVisible=!0,void(t&&t()))},R.onOverlayClick=function(){this.isVisible&&this.opt.destroyOnClick&&!this.isBusy()&&this.destroy()},R.toggleOverlayClick=function(){var t=this;setTimeout(function(){t.vars.onOverlayClickEvent?(a(t.overlay,t.vars.onOverlayClickEvent),t.vars.onOverlayClickEvent=null):s(t.overlay,t.vars.onOverlayClickEvent=t.onOverlayClick.bind(t))},0)},R.onKeydown=function(t){var n=t.keyCode||t.which,e=t.target||t.srcElement;if(-1===[9,13,32,27].indexOf(n)){if(!r(e,this.body))return}else 27===n&&this.opt.destroyOnEsc&&!this.isBusy()?this.destroy():9===n&&(l(t),this.focusElement());return!0},R.focusElement=function(t){t&&(this.lastTabindex=null);var n=this.query("["+D+"]");if(!n.length)return void this.overlay.focus();if(n=e(n),n.sort(function(t,n){return t.getAttribute&&n.getAttribute?i(t.getAttribute(D))-i(n.getAttribute(D)):-1}),this.lastTabindex)for(var o=0;o<n.length;o++)if(n[o].getAttribute(D)==this.lastTabindex&&o<n.length-1)return n[o+1].focus(),void(this.lastTabindex=n[o+1].getAttribute(D));n[0].focus(),this.lastTabindex=n[0].getAttribute(D)},R.getHtml=function(){return this.container},R.query=function(t){return e(this.container.querySelectorAll(t))},R.click=function(t,n){m(t)&&(t=this.query(t)),s(t,n)},R.attr=function(t,n,i){m(t)&&(t=this.query(t)),p(e(t),n,i)},R.isBusy=function(t){return void 0===t||t!==!0&&t!==!1||(this.busy=t),this.busy||!1};var W=null;this.huer=function(t){return W&&(W.opt.blurContent=!1,W.destroy()),W=new K(t)},this.huer.globals=H}).call(this);